#!/bin/sh

# Pre-push hook: ALL checks + additional validation before pushing
#
# Runs everything from pre-commit PLUS:
# - build: Final build to ensure compilation
# - lint:types: Validate TypeScript types in dist (arethetypeswrong)
# - lint:package: Validate package.json exports (publint)

set -e

echo "ðŸš€ Running pre-push checks..."

# Check for unused code
echo "ðŸ§¹ Checking for unused code..."
pnpm lint:unused

# Check for code duplication
echo "ðŸ“‹ Checking for code duplication..."
pnpm lint:duplicates

# Check for duplicate dependencies
echo "ðŸ“¦ Checking for duplicate dependencies..."
pnpm lint:dedupe

# Build the project to ensure it compiles
echo "ðŸ“¦ Building project..."
pnpm validate:pre-push

echo "âœ… All pre-push checks passed! Pushing to remote..."
